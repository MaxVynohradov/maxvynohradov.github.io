{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/six-reasons-why-you-shouldn-t-run-express-js-inside-aws-lambda/","result":{"pageContext":{"siteMetadata":{"title":"Vynohradov Blog","siteUrl":"https://maxvynohradov.github.io","social":{"twitterHandle":"@max_vynohradov"}},"slug":"six-reasons-why-you-shouldn-t-run-express-js-inside-aws-lambda/","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Six reasons why you shouldn't run Express.js inside AWS Lambda\",\n  \"date\": \"2020-12-10T12:12:03.284Z\",\n  \"coverImg\": \"./coverImg.jpeg\",\n  \"tags\": [\"serverless\", \"javascript\", \"aws\", \"nodejs\", \"expressjs\"],\n  \"description\": \"Tradeoffs to consider when choosing to use Express in Lambda. Some thoughts on why using Express.js inside AWS Lambda is a design anti-pattern and how to give it up without pain.\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Some facts why usage Express.js inside AWS Lambda is pitiful design anti-pattern and how to give it up without pain.\"), mdx(\"hr\", null), mdx(\"p\", null, \"Last few years popularity of NPM packages, that allow you to use Express.js inside AWS Lambda handler, grow up rapidly. These packages provide some functionality that allows you to run Express.js middlewares, controllers with some limitations, instead of plain AWS Lambda handler.\\nSome examples of such libraries:\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/aws-serverless-express\"\n  }), \"aws-serverless-express\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Run serverless applications and REST APIs using your existing Node.js application framework, on top of AWS Lambda\")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/serverless-http\"\n  }), \"serverless-http\")), mdx(\"p\", null, \"But why developers decided to do so? They\\u2019re just a few foremost reasons, that I\\u2019ve usually met in practice:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"No interest to learn new approaches to write handlers for API.For different reasons\\u200A\\u2014\\u200Awant to use serverless architecture, but have not time to adopt and re-write existed Express.js based solution to Lambda handlers.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Wish to use the existing Express.js functionality and ecosystem, mostly it\\u2019s about huge numbers of third-party middleware.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Tries to reduce costs using AWS Lambda instead of development server (like EC2, AWS ECS, AWS EKS, etc.)\")), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"So below the list of reasons why the usage of Express.js inside AWS Lambda in most cases are redundant, you probably get many drawbacks from this approach.\")), mdx(\"h3\", null, mdx(\"em\", {\n    parentName: \"h3\"\n  }, \"Increasing node_modules size and cold\\xA0starts\")), mdx(\"p\", null, \"Simple point\\u200A\\u2014\\u200Athe bigger node_modules do your artifact have, the bigger cold starts of AWS Lambda will you have. With no exceptions. Raw Express.js is near 541.1 KB, but you also need additional dependencies, mostly middleware, that can increase your node_modules several times.\"), mdx(\"h3\", null, mdx(\"em\", {\n    parentName: \"h3\"\n  }, \"Additional operational time\")), mdx(\"p\", null, \"When you use standalone Express.js on the server (standard way), each HTTP request is some kind of text that the server parses to a well-known request object. Lambdas that people tried to use with Express.js inside, usually runs under API Gateway or AWS Application Load Balancer, and data that come from this event source are already parsed by API GW and ALB! Yes, it\\u2019s different, but anyway.\\nWhen you use Express.js inside AWS Lambda your \\u201Csystem\\u201D make the next thing with input HTTP data:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"AWS API GW or AWS ALB parses HTTP request and convert them to the event payload.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The library that wraps the Express.js server maps the lambda event to server request.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Express.js one more time converts this to its request object.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The similar with a response\\u200A\\u2014\\u200Athe library that wraps Express.js converts HTTP response to AWS Lambda response object.\")), mdx(\"p\", null, \"So many supplementary conversions. Sometimes it looks like just wasting processor time.\"), mdx(\"h3\", null, mdx(\"em\", {\n    parentName: \"h3\"\n  }, \"AWS Lambda has a different limitation, that can be unexpected for your Express.js application:\")), mdx(\"p\", null, \"   First of all, lambdas are stateless\\u200A\\u2014\\u200Aeach AWS Lambda instance is an AWS Firecracker container, that will shut down in some time after inactivity. So you cannot simply persist data and share them across all lambda instances. The same situation with sessions\\u200A\\u2014\\u200Ato use it with AWS Lambda, you need additional storage, for instance, Redis instance hosted as AWS ElasticCache.\"), mdx(\"p\", null, \"   Lambdas container can live during several handler executions (warm lambdas), but in any way, it quits unexpectedly. And this could break some tools or make their behavior unpredictable. The most impressive case is related to buffering, loggers, and any error trackers, like Sentry. Usually, they don\\u2019t send all logs, data immediately, they buffering them firstly, and then send several logs items at once, to make this more efficient. But when your lambda\\u2019s container quits, time-to-time these buffers do not have time to be flushed into storage or third-party services. For sure, we can disable buffering, but some of the services require another SDKs, that specific for AWS Lambda. And they cannot be re-used simply as Express.js middleware\\u200A\\u2014\\u200Ayou should wrap them up as your own middleware, that double work.\"), mdx(\"p\", null, \"   Also, you cannot use web-sockets (WebSockets, socket.io) inside the Express.js application, for the same reason\\u200A\\u2014\\u200Athe lifetime of lambda execution container. But at the same time, AWS API GW supports web sockets, but they are implemented in another way, you cannot connect socket.io to them.\"), mdx(\"h3\", null, mdx(\"em\", {\n    parentName: \"h3\"\n  }, \"Some things that you are used to do in the Express.js app are different in AWS Lambda and has more adequate alternatives\")), mdx(\"p\", null, \"Despite all disadvantages, the embedded middleware pattern in Express.js is probably one of the popular things in the Node.js world. However, there is no need to use Express.js just for this, coz at least one middleware library is suited for AWS Lambda better:\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/@middy/core\"\n  }), \"@middy/core\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Core component of the middy framework, the stylish Node.js middleware engine for AWS Lambda To install middy you can \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://www.npmjs.com\"\n  }), \"www.npmjs.com\"))), mdx(\"p\", null, \"Also, it implements an onion-like middleware pattern, that is much more flexible than Express.js can provide for you.\"), mdx(\"h3\", null, mdx(\"em\", {\n    parentName: \"h3\"\n  }, \"Best practices for Express.js and AWS Lambda are different\")), mdx(\"p\", null, \"At least you can easily find out the next point\\u200A\\u2014\\u200Asecurity protection approaches are different. When Express.js best practice guide proposes to use Helmet.js library, it doesn\\u2019t applicable to AWS Lambdas. AWS proposes to use AWS WAF service that:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Protect your web applications from common web exploits\")), mdx(\"h3\", null, mdx(\"em\", {\n    parentName: \"h3\"\n  }, \"Lost benefits from individual packaging of\\xA0lambdas\")), mdx(\"p\", null, \"When you write classic AWS Lambda handlers, you usually can package each lambda artifact separately, to reduce each artifact size. But when you use Express.js, you cannot do this\\u200A\\u2014\\u200Aall lambdas require the same dependencies. Technically you can, but all of them will have the same size, which negates their advantages. Also, in this case, serverless-webpack-plugin cannot optimize imports correctly, because technically each lambda will have the same dependencies tree.\"), mdx(\"hr\", null), mdx(\"p\", null, \"Despite all of the above, I believe, that there some cases when the usage of Express.js inside AWS Lambda are valid and justified:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Pet projects\"), \"\\u200A\\u2014\\u200Acoz great AWS Free Tier, probably you can run them for free.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Your service is \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"not mission-critical\"), \", and you are okay with all issues described above\\u200A\\u2014\\u200Aso, okay, you can use it without any doubts (but \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"don\\u2019t forget about technical debt\"), \").\")), mdx(\"hr\", null), mdx(\"p\", null, \"Hope this information will be useful and you will not forget this when decide to use Express.js inside AWS Lambda the next time.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Six reasons why you shouldn't run Express.js inside AWS Lambda","description":"Tradeoffs to consider when choosing to use Express in Lambda. Some thoughts on why using Express.js inside AWS Lambda is a design anti-pattern and how to give it up without pain.","date":"2020-12-10T12:12:03.284Z","originalUrl":null,"coverImgFixed":{"src":"/static/ef40b644945fff2f90d5b149ea84e472/2244e/coverImg.jpg","height":267,"width":400},"coverImgSrc":"/static/ef40b644945fff2f90d5b149ea84e472/16310/coverImg.jpg","tags":["serverless","javascript","aws","nodejs","expressjs"]},"stats":{"text":"4 min read","minutes":3.986111111111111,"time":239166.66666666666,"words":1435},"previous":{"slug":"tools-to-manage-npm-dependency-in-your-project-as-a-professional/","frontmatter":{"title":"Tools to Manage NPM Dependency in Your Project as A Professional","description":" Sometimes it's not enough to just install and use NPM dependencies. You need to do some things in additional: check is package vulnerability-free; check is it open-source; check is it used in your project or it's redundant and just adds 100Mb weight to your node_modules 😅 This article help you to automate this processes in few minutes, painless","originalUrl":null,"date":"2020-11-13T12:12:03.284Z","tags":["webdev","javascript","npm","typescript","nodejs","tutorial"],"coverImg":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAcUlllY4r//EABkQAAIDAQAAAAAAAAAAAAAAAAABAhESEP/aAAgBAQABBQJKzJkjyj//xAAVEQEBAAAAAAAAAAAAAAAAAAAAIf/aAAgBAwEBPwFX/8QAFhEBAQEAAAAAAAAAAAAAAAAAABIR/9oACAECAQE/AZ1D/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRAAAgMBAAAAAAAAAAAAAAAAABEBEDGB/9oACAEBAAE/IVKOZOQIf//aAAwDAQACAAMAAAAQSC//xAAWEQEBAQAAAAAAAAAAAAAAAAABAEH/2gAIAQMBAT8QRyCf/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERMf/aAAgBAgEBPxBNgo//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhgTH/2gAIAQEAAT8QNbcFfqZF5MmoHuSsU1OnPN//2Q==","src":"/static/7dd5a316f1d90ad2296c5c9ddac9eb61/16310/coverImg.jpg","srcSet":"/static/7dd5a316f1d90ad2296c5c9ddac9eb61/07af2/coverImg.jpg 256w,\n/static/7dd5a316f1d90ad2296c5c9ddac9eb61/49b36/coverImg.jpg 512w,\n/static/7dd5a316f1d90ad2296c5c9ddac9eb61/16310/coverImg.jpg 1024w,\n/static/7dd5a316f1d90ad2296c5c9ddac9eb61/f2e3f/coverImg.jpg 1400w"},"fixed":{"height":283,"width":400,"src":"/static/7dd5a316f1d90ad2296c5c9ddac9eb61/2244e/coverImg.jpg"}}}},"id":"9c9f1c3e-49b2-557a-8887-47610d009c44","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Tools to Manage NPM Dependency in Your Project as A Professional\",\n  \"date\": \"2020-11-13T12:12:03.284Z\",\n  \"coverImg\": \"./coverImg.jpeg\",\n  \"tags\": [\"webdev\", \"javascript\", \"npm\", \"typescript\", \"nodejs\", \"tutorial\"],\n  \"description\": \" Sometimes it's not enough to just install and use NPM dependencies. You need to do some things in additional: check is package vulnerability-free; check is it open-source; check is it used in your project or it's redundant and just adds 100Mb weight to your node_modules 😅 This article help you to automate this processes in few minutes, painless\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Why do we talk about project quality and technical debt so much? Because this directly or indirectly affects the speed\\nof development, the complexity of support, the time to implement new functionality, and the possibility of extending the current one.\"), mdx(\"p\", null, \"There is a great number of aspects that affect a project\\u2019s quality. Some of them are difficult to understand, hard to\\ncheck, and require manual checks from highly experienced developers or QA engineers. Others are plain and simple.\\nThey can be checked and fixed automatically. Despite this fact, they represent a weighty part of the whole project\\u2019s quality.\"), mdx(\"p\", null, \"In this article, you will find NPM packages that can automatically check some critical sides of your project, such\\nas NPM dependencies, their licenses, and validating security issues.\"), mdx(\"h4\", null, mdx(\"strong\", {\n    parentName: \"h4\"\n  }, \"Find Missed or Unused Dependencies\")), mdx(\"p\", null, \"Depcheck is a useful tiny library to check what dependencies are unused and what dependencies are missing from package.json but used in your code base.\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/depcheck\"\n  }), \"depcheck - Check for Vulnerabilities in Your Dependencies\")), mdx(\"p\", null, \"It\\u2019s highly recommended to use it locally (for instance, on pre-commit hooks) or in remote CI to avoid the following issues:\\nRedundant dependencies increase build/bundle size, which leads to these consequences: Docker images become bigger,\\nAWS Lambda handler also has longer cold starts, and an event can surpass lambda size limits.\\nMissed dependencies can break your applications in totally unexpected ways in production. Moreover, they can crash\\nyour CI/CD pipelines if they are dev dependencies.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Installation and usage\")), mdx(\"deckgo-highlight-code\", {\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", _extends({\n    parentName: \"deckgo-highlight-code\"\n  }, {\n    \"slot\": \"code\"\n  }), \"npm install -g depcheck\\n// or\\nyarn global add depcheck\"), \"\\n        \"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Example of usage\")), mdx(\"deckgo-highlight-code\", {\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", _extends({\n    parentName: \"deckgo-highlight-code\"\n  }, {\n    \"slot\": \"code\"\n  }), \"// usage as npm script\\n\\\"dependencies:check\\\": \\\"yarn run depcheck\\\",\"), \"\\n        \"), mdx(\"p\", null, \"By running this command, you can see a list of issued dependencies:\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/71a2e034f92e169404ec1aaf87993e6e/ec5f6/depcheck.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"82.33333333333334%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACNklEQVQ4y4VT+W8SYRDl//9ZE42JUCrVCgW1SbWxMfEfqBHKucAusAfLtRx7AuE5MwWkLccPL9+x872dN28mdnnzG6nrXzjP3SGZvX2K3IH9nrjUtzswVyz55Sf+3v9BvVWCZnTR1i20dHOL7bljHvxmWDbyZQWJqx+Ivfv4FdWqAscZot/vYzKZIAwCuK4Lj+DOZvA9Dx5hNp3KPZ8D38eUYvkuCgOorQ7efMgi9jaVxX2hQn+zUS5XoOuGPGYEROz7gaxBEO7sg/U3Hx5hsVigobbwKvGZCXMoFMtQajU0VRWNRhOGaUrwfD4/iSiKAKwkQyHkNIuVGgzDJMkDkcRBm+BTCMMIq9UKzVZ7nSERFkoVmJTVYDiUGrKEzYNd4n0ZhtEjofqEsFiBpmqo1xtQaeX6LJfLLdkxyS8JyZT8Q5nI6lCIsNlUYds2BoOhyD8k/WiGD+UquatLHbtdW+Sz26PR6Gj99hJuTGECTWuJu1zD5bqOvH+OXYc3pjyTXJJ24bZhyZ2ODt0wYFoWZWuhRw1v2z2555UHgOu8IX0puVQVM1iyotSFVG1qsKwuue5gNuOJcTGlqZA91ZYJOTtepW20HcI8NXaP/txudx4zMyzYRg+G3sFo2BMS3/VpPB1pq/F4IuSOMxZwY//vQ5qUqtKgeQxlLjkwoMfejMbPpZ6UekUCMWIDvhdzQiHUKJnXZ2nEEpnvOM9cI3mZQ/wigwQhfpGWPeN9Kn0SZ5+uhCOevsE/lAyG4K1cN6IAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"yarn run depcheck\",\n    \"title\": \"yarn run depcheck\",\n    \"src\": \"/static/71a2e034f92e169404ec1aaf87993e6e/c1b63/depcheck.png\",\n    \"srcSet\": [\"/static/71a2e034f92e169404ec1aaf87993e6e/5a46d/depcheck.png 300w\", \"/static/71a2e034f92e169404ec1aaf87993e6e/0a47e/depcheck.png 600w\", \"/static/71a2e034f92e169404ec1aaf87993e6e/c1b63/depcheck.png 1200w\", \"/static/71a2e034f92e169404ec1aaf87993e6e/d61c2/depcheck.png 1800w\", \"/static/71a2e034f92e169404ec1aaf87993e6e/ec5f6/depcheck.png 1852w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"h4\", null, mdx(\"strong\", {\n    parentName: \"h4\"\n  }, \"List of issued dependencies\")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.npmjs.com/cli/v6/commands/npm-audit\"\n  }), \"npm-audit\"), \", \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://classic.yarnpkg.com/en/docs/cli/audit/\"\n  }), \"yarn audit\"), \", and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/improved-yarn-audit\"\n  }), \"improved-yarn-audit\"), \"\\nare tools that can find out dependency vulnerabilities.\\nMoreover, they automatically update packages to resolve issues.\\nBoth npm audit and yarn audit are pre-installed with package managers, but I prefer improved-yarn-audit.\\nIt\\u2019s a wrapper around yarn audit that provides some improvements \\u2014 especially for usage in CI pipelines (from docs):\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"No way to ignore advisories\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Unable to filter out low severity issues\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Ongoing network issues with NPM registry cause false positives\")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/improved-yarn-audit\"\n  }), \"improved-yarn-audit - This project aims to improve upon the existing Yarn package manager audit functionality\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Installation\")), mdx(\"deckgo-highlight-code\", {\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", _extends({\n    parentName: \"deckgo-highlight-code\"\n  }, {\n    \"slot\": \"code\"\n  }), \"npm install -g depcheck\\n// or\\nyarn global add improved-yarn-audit\"), \"\\n        \"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Example of usage\")), mdx(\"deckgo-highlight-code\", {\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", _extends({\n    parentName: \"deckgo-highlight-code\"\n  }, {\n    \"slot\": \"code\"\n  }), \"\\\"dependencies:audit\\\": \\\"yarn run improved-yarn-audit \\u2014 min-severity moderate\\\",\"), \"\\n        \"), mdx(\"p\", null, \"Below, you can see the results of using this command in a real project codebase. This tool searches for vulnerabilities\\nin transitive dependencies too:\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/f647da71b930bfeea4f9354d3f684c74/a878e/improved-yarn-audit.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"99%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAC80lEQVQ4y31Ua1PaUBDl99dvHf1SbTsdhNapFm2lztjHtL+hyhtCQhLyfgJ5gJ7u3hBEi2XmzL0bkr1nz569lZOvv1H/8gPH59eEb1u43qB28Tjehfrn7zhp/kKl2rhGr30D1VRhWi4M04Zh2TBtB9YaU9MSse16sBx3A9t5iHXDwsfmT1SO3l9gNNbguD4MwxCYTg14roso8BCHPkzThO/7mM1mSBYLrLIEy2yBOI6woPj+/h5JskCtcYXKYb2Bbm9AiUxMKZlt23DoRJfYOJw0jpFlGX2Q0MeJWLM0RZomIhnHeZ5T8hjV00tUXtU+YSjJiMKQkrgIaeUEJfjlZb4U6y5kGf2/XAr21dMmJ2xgJI0QBi5pSFqRXmV5URQhnsUI5yESYrR90NNDi4SXRcKxLCPwA1FqyTAVZaXFPk+JRY7VaiXAjLb3d3erh4SH9XP0BkOoqgpFmQiWzJC19Hh1qLvUYT6Mn1nkANbWovd4z2Cpoog0PGsWCbkpk4lKSTXq8BSapkPXp9Bp73kegiAghGLlw3jv+4EAHxrHs6clT0Sp3Fn+syxlFzYlr1E+e1TyYCgRI12UrGqaYMrMuCnCJs80owTr+4jhaCyLBKyH5/kbfzE2Ddhi92CZdcLtLrOx+8MR6aYJhqwhW4cbwBJYtBo0KfyMze9Qk1ieOR26fK7kP7dtdDpdgZvbFlqtIu52e+j1+ugPBmhT3G53RCyNx5BlRYxkUZVXTErR5WL0mOGYShc6koXKuLRGaSeWg8eR9WUExLYYgnVC1pB9yF7isizDhq7qUBWNEhlCxzRJMZ/PRTIGG57XoiH/lNxAh8pQFAWjkSTKGQ+JqTQhb0qCVeTHgiGbmzXkxrGx4/XFwdi6HBqQFVVcS2xcviTm0ZzWAHmWrj232sxsnhesOOaRo7sL/GPWx0JDug9b3b6YCoWmZUIefApFfeY5vS+vv5GoSULDKl3f+28/YO/gDV7sv96Jvf883zso8PKohndnV/gLYbytcxz/vhgAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"yarn run improved-yarn-audit — min-severity moderate\",\n    \"title\": \"yarn run improved-yarn-audit — min-severity moderate\",\n    \"src\": \"/static/f647da71b930bfeea4f9354d3f684c74/c1b63/improved-yarn-audit.png\",\n    \"srcSet\": [\"/static/f647da71b930bfeea4f9354d3f684c74/5a46d/improved-yarn-audit.png 300w\", \"/static/f647da71b930bfeea4f9354d3f684c74/0a47e/improved-yarn-audit.png 600w\", \"/static/f647da71b930bfeea4f9354d3f684c74/c1b63/improved-yarn-audit.png 1200w\", \"/static/f647da71b930bfeea4f9354d3f684c74/d61c2/improved-yarn-audit.png 1800w\", \"/static/f647da71b930bfeea4f9354d3f684c74/a878e/improved-yarn-audit.png 2048w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"h4\", null, mdx(\"strong\", {\n    parentName: \"h4\"\n  }, \"Check Licenses of Dependencies\")), mdx(\"p\", null, \"For real production projects, dependency licenses are critical to use because the way that you are using\\nthe dependency can be prohibited by the package\\u2019s license. To avoid this, you should continuously check the\\nlicenses of all dependencies that you use in a project. And if your project is a startup, appropriate usage of dependencies\\naccording to their licenses is mandatory to get investors to approve your product. license-checker is the best way to do this!\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/license-checker\"\n  }), \"license-checker - Ever needed to see all the license info for a module and its dependencies?\")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Installation\")), mdx(\"deckgo-highlight-code\", {\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", _extends({\n    parentName: \"deckgo-highlight-code\"\n  }, {\n    \"slot\": \"code\"\n  }), \"npm install -g license-checker\\n// or\\nyarn global add license-checker\"), \"\\n        \"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Example of usage\")), mdx(\"deckgo-highlight-code\", {\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", _extends({\n    parentName: \"deckgo-highlight-code\"\n  }, {\n    \"slot\": \"code\"\n  }), \"\\\"licenses:check\\\": \\\"yarn run license-checker --exclude 'MIT, MIT OR X11, BSD, ISC'\\\",\"), \"\\n        \"), mdx(\"p\", null, \"Checking licenses of dependencies\"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/b4f6823823e7a2309203d234889af92c/51dd6/license-checker1.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"115.00000000000001%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsSAAALEgHS3X78AAADLElEQVQ4y41VWW/aYBDk97d9TKomTQ8p5HpJaCtV6qWqz31IFSUqAYPvE4NvjhDY7qxtEhIqBWlYY8N8Mzv7fTROPv+iw08/6aD1nfbPvlKz9Rj7rc337z8//PiDwNXYb32jq4s/pFpdst2ALMd7BNv1N943HZfhkT8I6W9XZUFfqLF3/JE6HYVG0ZAGgwHFcUzjoqA8SynNEsrylPIipyTla76HZ7PplMbjgj9n8hkvhxd9fdSixu7BKbNrpBsOKYpClmVTNBoxYUxJnlDMNc5LZEVGk8mECiYZj8c0m81oyuSLxYIM06ad5ik1dpiwp2rkOA71+yoTG6TyZ88PKAgG5HtlBTzPZxchDYdDxmhFulwuyWAh4BJCpX9H2O0qQgr7gO/7TO5LdV1XiPM8l9bA8hrhnUKdV/dEmW2ZYns0ikQFfgwlwM3NjQAk9fV0uoFQ6alkmRZpmi6khmFSGIaCEfcTADn6d3t7K0Tz+VzwX4Ww0+v3GapYh0oTi+h6WbWyooewCuVpVoa0UWHdwyAIpPlQBGVhFQB6lqYZJUkq9tM0lXsTThkvw3IqwmapcJWybkg1TZODCCQMLIJkQQaiJEmkyghVSeus/l7KUMiWe32pCAjWgJI0kKRdvg/1fpV6HCertDXu++7BQ4WqKr1SmNh1Pfky1GCQoQS9whADdThQt265mkPbtiVhWFY1TYAQQAzUQ50zeRTFqzHCTlkuFw9CqSx3Ol2pDicOEiyCEcIiuA+bGHaoRhib55Df+mzTth35oaL0qN2+lhYgXYQRhkMhyfNCLGL+arvTzXPIe5cVYduhh5ZliUVALHuezClUYhFsP1QQPh5sfkNCUAR16BuusfXqPYtxgcJa3drWe0j4it90PnqgALsCfby8vJKkQQ5ikCXVINcnTI3NhKwwiiI+GJxyxqrdAos2q0WFdVSEgkWQOAZ7Up2H+t15eMaWDTmFC7Y4wbzNlzRnO095QZ2c2CxAdsre0Qf6fX4hh0Kb7bavu2y7J9ew3eMZxbN1aCsociibdH5xReBqNPlPavv9Cb14+Zaeb78RPKvr1t6TgO9uvTsmcP0Dz398t8CbGyEAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"yarn run license-checker — exclude ‘MIT, MIT OR X11, BSD, ISC\",\n    \"title\": \"yarn run license-checker — exclude ‘MIT, MIT OR X11, BSD, ISC\",\n    \"src\": \"/static/b4f6823823e7a2309203d234889af92c/c1b63/license-checker1.png\",\n    \"srcSet\": [\"/static/b4f6823823e7a2309203d234889af92c/5a46d/license-checker1.png 300w\", \"/static/b4f6823823e7a2309203d234889af92c/0a47e/license-checker1.png 600w\", \"/static/b4f6823823e7a2309203d234889af92c/c1b63/license-checker1.png 1200w\", \"/static/b4f6823823e7a2309203d234889af92c/d61c2/license-checker1.png 1800w\", \"/static/b4f6823823e7a2309203d234889af92c/51dd6/license-checker1.png 1952w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"But for usage inside CI/CD, I prefer the following variant because it\\u2019s much shorter:\"), mdx(\"deckgo-highlight-code\", {\n    \"theme\": \"one-light\"\n  }, \"\\n          \", mdx(\"code\", _extends({\n    parentName: \"deckgo-highlight-code\"\n  }, {\n    \"slot\": \"code\"\n  }), \"\\\"licenses:check:ci\\\": \\\"yarn run license-checker \\u2014 summary\\\",\"), \"\\n        \"), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/dde5303f357e10b90c678d7853a63456/a9577/license-checker2.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"87.33333333333334%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACGElEQVQ4y52U62/SYBTG+f8/aow6k20wzBwOHDEZJi4m+m2JwzFgdEx6v1AuLfT2tlx8PC1zlsvcsMkvb9ucPnme876nmcLpV+Q/fsHBhzNki5+2o/R3zZfPUKh8QyZ38hkX59/BdWq4lVWIsgZeUp9MR1Qga11U6xz2jivI7ByWwbVu4PtjWPYItm3D97wE13Xu71kQwHPdhOSZBck7l54nUQhelPEid4zM63wJ59UGFNWELLZhGF2MRmN4Y5s+dhAEjAhS6x2MJXi+j9lsinZHwLPdI2Re5Yv4cdWEaXZh6AocEppEDJPJ5ElEUYT4+smLJPguFizh4vIKoiCi0+FhGipFce+LHyMMw1XB2GEDmqZh0DeTnsS9+SOYXjexQbCEaq0OgRfA8zxtyhAeNT0ufExss+DBooeGboAXBIiSTE575NJfir21Q0VRoGsq7bBFhatRo+0cVmsNqKqKVouDLIkU20rO2/85vIus6zokScKYjo3rUg8Ze3Cn0+4fjCxT75rNa2jk1LaG/4yZdrwm+JIcXtav0ev1IMkyuoaBfr+fjOBwOCQsWJaVrPG7MFx2vi6YK6LJ3VDUEQa9AU2MScfGRUjzGRevshqfsYXgbTpyk2svBt1xSHgM5tHguwH9BBz8ms8xX2K2xGw6TQQFScHzPZrl/WIF+0cn2H37HjvZwzXe5IhsitwycU38bbZQpt/XKX4D/X/UKwDM8jAAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"yarn run license-checker — summary\",\n    \"title\": \"yarn run license-checker — summary\",\n    \"src\": \"/static/dde5303f357e10b90c678d7853a63456/c1b63/license-checker2.png\",\n    \"srcSet\": [\"/static/dde5303f357e10b90c678d7853a63456/5a46d/license-checker2.png 300w\", \"/static/dde5303f357e10b90c678d7853a63456/0a47e/license-checker2.png 600w\", \"/static/dde5303f357e10b90c678d7853a63456/c1b63/license-checker2.png 1200w\", \"/static/dde5303f357e10b90c678d7853a63456/a9577/license-checker2.png 1784w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"I hope this article helped you to address or avoid problems with NPM packages.\"), \"\\n\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Thanks for reading!\")));\n}\n;\nMDXContent.isMDXComponent = true;"},"next":null,"id":"40972bf5-fbd0-5e00-bce4-414b1acb39b8"}},"staticQueryHashes":["2052298874"]}